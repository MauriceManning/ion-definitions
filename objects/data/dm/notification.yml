
# Enumerates possible notification delivery modes
DeliveryMode: !enum (values=(DIGEST, UNFILTERED), default=UNFILTERED)

# Enumerates possible notification delivery frequency categories.
NotificationFrequencyType: !enum (values=(REAL_TIME, BATCH, DISABLED), default=REAL_TIME)

# Enumerates possible notification delivery frequency categories.
NotificationAggregateType: !enum (values=(NONE, PLATFORM, SITE, FACILITY, COLLECTION), default=NONE)

---

# Abstract base type for a notification delivery configuration.
DeliveryConfig:
    # Email address to use. If empty, get user contact-info
    email: []
    # Delivery mode for email notification as DeliveryMode value.
    # DIGEST signifies SMS or other limited channel
    mode: !DeliveryMode
    # Indicates the notification frequency mode (real_time and batch) as Frequency value
    frequency: !NotificationFrequencyType

---

# Describes a standing request for notifications by type and delivery modality for one user.
NotificationRequest: !Extends_InformationResource
  # type of aggregation to augment the set of origins
  aggregate_type: !NotificationAggregateType
  # Event filter by origin
  origin: ""
  # Event filter by origin type
  origin_type: ""
  # Event filter by event type
  event_type: ""
  # Event filter by event subtype
  event_subtype: ""
  # The start and end time of this subscription
  temporal_bounds: !TemporalBounds
  # Delivery information
  delivery_configuration: !DeliveryConfig

---

# Notification delivery configuration for a detection event
DetectionFilterConfig:
  processing:
    search_string: ""

  delivery: # contains the information to send when an event is detected
    message: ""       # Message to be put in the detection event
